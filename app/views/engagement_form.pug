extends layout

block pageBody
  .engagement_form
    .container
      h2 Employee Engagement form
      .stepwizard.col-md-12
        .stepwizard-row.setup-panel
          .stepwizard-step
            a.btn.btn-primary.btn-circle(href='#step-1', type='button') 1
            p Question 1
          .stepwizard-step
            a.btn.btn-primary.btn-circle(href='#step-2', type='button' ) 2
            p Question 2
          .stepwizard-step
            a.btn.btn-primary.btn-circle(href='#step-3', type='button') 3
            p Question 3
          .stepwizard-step
            a.btn.btn-primary.btn-circle(href='#step-4', type='button') 4
            p Question 4
          .stepwizard-step
            a.btn.btn-primary.btn-circle(href='#step-5', type='button') 5
            p Question 5
          .stepwizard-step
            a.btn.btn-primary.btn-circle(href='#step-6', type='button') 6
            p Question 6
          .stepwizard-step
            a.btn.btn-primary.btn-circle(href='#step-7', type='button') 7
            p Submit
      form(role='form', method='POST', action='/engagements/submit_engagement_survey')
        #step-1.row.setup-content
          .col-md-8.center.float-none
            .col-md-12
              h3  Question 1
              .form-group
                label On a scale of 1 - 10 do people I work with treat me with respect
                br
                br
                br
                input#ex1(style="width:100%;" data-slider-id='ex1Slider', name="q1" ,type='text', data-slider-min='0', data-slider-max='10', data-slider-step='1', data-slider-value='14')
              //- button.btn.btn-primary.prevBtn.btn-lg.pull-left(type='button') Previous
              button.btn.btn-primary.nextBtn.pull-right(type='button') Next      
        #step-2.row.setup-content
          .col-md-8.center.float-none
            .col-md-12
              h3  Question 2
              .form-group
                label My supervisor creates a motivating and energizing workplace.
                br
                input#ex2(style="width:100%;" data-slider-id='ex2Slider', name="q2" ,type='text', data-slider-min='0', data-slider-max='10', data-slider-step='1', data-slider-value='14')
              button.btn.btn-primary.prevBtn.pull-left(type='button') Previous
              button.btn.btn-primary.nextBtn.pull-right(type='button') Next
        #step-3.row.setup-content
          .col-md-8.center.float-none
            .col-md-12
              h3  Question 3
              .form-group
                label My supervisor creates a motivating and energizing workplace.
                br
                input#ex3(style="width:100%;" data-slider-id='ex3Slider', name="q3" ,type='text', data-slider-min='0', data-slider-max='10', data-slider-step='1', data-slider-value='14')
              button.btn.btn-primary.prevBtn.pull-left(type='button') Previous
              button.btn.btn-primary.nextBtn.pull-right(type='button') Next
        #step-4.row.setup-content
          .col-md-8.center.float-none
            .col-md-12
              h3  Question 4
              .form-group
                label My supervisor creates a motivating and energizing workplace.
                br
                input#ex4(style="width:100%;" data-slider-id='ex4Slider', name="q4" ,type='text', data-slider-min='0', data-slider-max='10', data-slider-step='1', data-slider-value='14')
              button.btn.btn-primary.prevBtn.pull-left(type='button') Previous
              button.btn.btn-primary.nextBtn.pull-right(type='button') Next
        #step-5.row.setup-content
          .col-md-8.center.float-none
            .col-md-12
              h3  Question 5
              .form-group
                label My supervisor creates a motivating and energizing workplace.
                br
                input#ex5(style="width:100%;" data-slider-id='ex5Slider', name="q5" ,type='text', data-slider-min='0', data-slider-max='10', data-slider-step='1', data-slider-value='14')
              button.btn.btn-primary.prevBtn.pull-left(type='button') Previous
              button.btn.btn-primary.nextBtn.pull-right(type='button') Next
        #step-6.row.setup-content
          .col-md-8.center.float-none
            .col-md-12
              h3  Question 6
              .form-group
                label My supervisor creates a motivating and energizing workplace.
                br
                input#ex6(style="width:100%;" data-slider-id='ex6Slider', name="q6" ,type='text', data-slider-min='0', data-slider-max='10', data-slider-step='1', data-slider-value='14')
              button.btn.btn-primary.prevBtn.pull-left(type='button') Previous
              button.btn.btn-primary.nextBtn.pull-right(type='button') Next
        #step-7.row.setup-content
          .col-md-8.center.float-none
            .col-md-12
              h3 Submit
              button.btn.btn-primary.prevBtn.pull-left(type='button') Previous
              button.btn.btn-success.pull-right(type='submit') Submit
    script.
      $(document).ready(function () {
        var navListItems = $('div.setup-panel div a'),
                allWells = $('.setup-content'),
                allNextBtn = $('.nextBtn'),
                allPrevBtn = $('.prevBtn');

      allWells.hide();

        const slider1 = $('#ex1').slider({
          formatter: function(value) {
            return 'Current value: ' + value;
            console.log(value);
          }
        });
        const slider2 = $('#ex2').slider({
          formatter: function(value) {
            return 'Current value: ' + value;
            console.log(value);
          }
        });
        const slider3 = $('#ex3').slider({
          formatter: function(value) {
            return 'Current value: ' + value;
            console.log(value);
          }
        });
        const slider4 = $('#ex4').slider({
          formatter: function(value) {
            return 'Current value: ' + value;
            console.log(value);
          }
        });
        const slider5 = $('#ex5').slider({
          formatter: function(value) {
            return 'Current value: ' + value;
            console.log(value);
          }
        });
        const slider6 = $('#ex6').slider({
          formatter: function(value) {
            return 'Current value: ' + value;
            console.log(value);
          }
        });
        
        //- const slider = $('#ex').slider({
        //-   formatter: function(value) {
        //-     return 'Current value: ' + value;
        //-     console.log(value);
        //-   }
        //- });

        navListItems.click(function (e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                    $item = $(this);

            if (!$item.hasClass('disabled')) {
                navListItems.removeClass('btn-primary').addClass('btn-default');
                $item.addClass('btn-primary');
                allWells.hide();
                $target.show();
                $target.find('input:eq(0)').focus();
            }
        });
        
        allPrevBtn.click(function(){
            var curStep = $(this).closest(".setup-content"),
                curStepBtn = curStep.attr("id"),
                prevStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().prev().children("a");

                prevStepWizard.removeAttr('disabled').trigger('click');
        });

        allNextBtn.click(function(){
            var curStep = $(this).closest(".setup-content"),
                curStepBtn = curStep.attr("id"),
                nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                curInputs = curStep.find("input[type='text'],input[type='url']"),
                isValid = true;

            $(".form-group").removeClass("has-error");
            for(var i=0; i<curInputs.length; i++){
                if (!curInputs[i].validity.valid){
                    isValid = false;
                    $(curInputs[i]).closest(".form-group").addClass("has-error");
                }
            }

            if (isValid)
                console.log('slider1', slider1[0].value);
                console.log('slider2', slider2[0].value);
                console.log('slider3', slider3[0].value);
                console.log('slider4', slider4[0].value);
                console.log('slider5', slider5[0].value);
                console.log('slider6', slider6[0].value);
                nextStepWizard.removeAttr('disabled').trigger('click');
        });

        $('div.setup-panel div a.btn-primary').trigger('click');

      });
